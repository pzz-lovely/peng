# final关键性和不变性

### 不变性(Immutable)

- 对于对象而言，在对象被创建后，状态不能被修改，那么他就是不可变的。
- 具有不可变性的对象一定是线程安全的，我们不需要对其采取任何额外的安全措施，也能保证线程安全(因为只能读取)

### fianl的作用

#### 早期

- 锁定
- 效率：早期的Java实现版本中，会将final方法转为内嵌调用。

#### 现在

类防止被继承，方法防止被重写，变量防止被修改

天生是线程安全，而不需要二外的同步开销。

### 3种用法：修饰变量、方法、类

#### final修饰变量

被final修饰的变量，意味着值不能被修改。如果变量是对象，那么对象的引用不能变，但是对象自身的内容依然可以变化。

### 注意点

不允许修饰构造方法。

### 不变性和fainl的关系

对于基本数据类型，确实被final修饰后就具有不变性

对于对象类型，需要该对象保证自身被创建后，状态永远不会变才可以。

### 栈封闭

方法里面的变量。